---
import Button from './Button.astro';
import RippleTransition from './RippleTransition.astro';
import { Home, ArrowLeft, Menu, X, FileText } from 'lucide-react';

interface Props {
  currentPage?: 'home' | 'blog' | 'blog-post';
}

const { currentPage = 'home' } = Astro.props;
---

<header class="border-b-8 border-black bg-white shadow-[0px_8px_0px_0px_#000000]">
  <nav class="max-w-6xl mx-auto flex justify-between items-center p-4 sm:p-6">
    <a href="/" class="text-2xl sm:text-3xl font-black hover:underline">
      FRANUSI.DEV
    </a>
    
    <!-- Desktop Navigation -->
    <div class="hidden md:flex gap-2 lg:gap-4">
      <Button
        id="modal-open-btn"
        variant="outline"
        className="bg-blue-500 text-white border-4 border-black font-black hover:bg-blue-600 shadow-[4px_4px_0px_0px_#000000] text-sm lg:text-base px-3 lg:px-4"
      >
        RESUME/CV
      </Button>
      {currentPage === 'blog-post' && (
        <Button
          variant="outline"
          className="bg-black text-white border-4 border-black font-black hover:bg-gray-800 shadow-[4px_4px_0px_0px_#000000] text-sm lg:text-base px-3 lg:px-4"
        >
          <ArrowLeft className="mr-1 lg:mr-2 w-3 h-3 lg:w-4 lg:h-4" />
          <a href="/blog">BACK TO BLOG</a>
        </Button>
      )}
      {currentPage !== 'blog' && currentPage !== 'blog-post' && (
        <Button
          variant="outline"
          className="bg-black text-white border-4 border-black font-black hover:bg-gray-800 shadow-[4px_4px_0px_0px_#000000] text-sm lg:text-base px-3 lg:px-4"
        >
          <a href="/blog">BLOG</a>
        </Button>
      )}
      {currentPage !== 'home' && (
        <Button
          variant="outline"
          className="bg-black text-white border-4 border-black font-black hover:bg-gray-800 shadow-[4px_4px_0px_0px_#000000] text-sm lg:text-base px-3 lg:px-4"
        >
          <Home className="mr-1 lg:mr-2 w-3 h-3 lg:w-4 lg:h-4" />
          <a href="/">HOME</a>
        </Button>
      )}
      <a href="https://www.linkedin.com/in/franusi" target="_blank" rel="noopener noreferrer">
        <Button
          variant="outline"
          className="bg-red-500 text-white border-4 border-black font-black hover:bg-red-600 shadow-[4px_4px_0px_0px_#000000] text-sm lg:text-base px-3 lg:px-4"
        >
          HIRE ME
        </Button>
      </a>
    </div>

    <!-- Mobile Menu Button -->
    <button 
      id="mobile-menu-toggle"
      class="md:hidden bg-black text-white border-4 border-black p-2 shadow-[4px_4px_0px_0px_#000000] font-black"
    >
      <Menu id="menu-icon" className="w-5 h-5" />
      <X id="close-icon" className="w-5 h-5 hidden" />
    </button>
  </nav>

  <!-- Mobile Navigation Menu -->
  <div id="mobile-menu" class="hidden md:hidden bg-white border-t-4 border-black">
    <div class="p-4 space-y-3">
      <Button
        id="modal-open-btn-mobile"
        variant="outline"
        className="w-full bg-blue-500 text-white border-4 border-black font-black hover:bg-blue-600 shadow-[4px_4px_0px_0px_#000000] text-sm"
      >
        RESUME/CV
      </Button>
      {currentPage === 'blog-post' && (
        <Button
          variant="outline"
          className="w-full bg-black text-white border-4 border-black font-black hover:bg-gray-800 shadow-[4px_4px_0px_0px_#000000] text-sm"
        >
          <ArrowLeft className="mr-2 w-4 h-4" />
          <a href="/blog">BACK TO BLOG</a>
        </Button>
      )}
      {currentPage !== 'blog' && currentPage !== 'blog-post' && (
        <Button
          variant="outline"
          className="w-full bg-black text-white border-4 border-black font-black hover:bg-gray-800 shadow-[4px_4px_0px_0px_#000000] text-sm"
        >
          <a href="/blog">BLOG</a>
        </Button>
      )}
      {currentPage !== 'home' && (
        <Button
          variant="outline"
          className="w-full bg-black text-white border-4 border-black font-black hover:bg-gray-800 shadow-[4px_4px_0px_0px_#000000] text-sm"
        >
          <Home className="mr-2 w-4 h-4" />
          <a href="/">HOME</a>
        </Button>
      )}
      <Button
        variant="outline"
        className="w-full bg-red-500 text-white border-4 border-black font-black hover:bg-red-600 shadow-[4px_4px_0px_0px_#000000] text-sm"
      >
        HIRE ME
      </Button>
    </div>
  </div>
</header>

<RippleTransition />

<script>
  const toggle = document.getElementById('mobile-menu-toggle');
  const menu = document.getElementById('mobile-menu');
  const menuIcon = document.getElementById('menu-icon');
  const closeIcon = document.getElementById('close-icon');

  if (toggle && menu && menuIcon && closeIcon) {
    toggle.addEventListener('click', () => {
      menu.classList.toggle('hidden');
      menuIcon.classList.toggle('hidden');
      closeIcon.classList.toggle('hidden');
    });
  }

  const modalOpenBtn = document.getElementById('modal-open-btn');
  const modalOpenBtnMobile = document.getElementById('modal-open-btn-mobile');

  if (modalOpenBtn) {
    modalOpenBtn.addEventListener('click', (event) => {
      if ((window as any).createRippleTransition) {
        (window as any).createRippleTransition(event, '/resume');
      }
    });
  }

  if (modalOpenBtnMobile) {
    modalOpenBtnMobile.addEventListener('click', (event) => {
      if ((window as any).createRippleTransition) {
        (window as any).createRippleTransition(event, '/resume');
      }
      if (menu) {
        menu.classList.add('hidden');
        menuIcon?.classList.remove('hidden');
        closeIcon?.classList.add('hidden');
      }
    });
  }
</script>
